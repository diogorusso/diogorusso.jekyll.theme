!function(d){var g="data-ab-parent",n="ab-color-found",r={selector:"[data-adaptive-background]",parent:null,exclude:["rgb(0,0,0)","rgb(255,255,255)"],shadeVariation:!1,shadePercentage:0,shadeColors:{light:"rgb(255,255,255)",dark:"rgb(0,0,0)"},normalizeTextColor:!1,normalizedTextColors:{light:"#fff",dark:"#000"},lumaClasses:{light:"ab-light",dark:"ab-dark"},transparent:null};function h(a,r){var e=a.split(","),t=r<0?0:255,n=r<0?-1*r:r,o=parseInt(e[0].slice(4)),s=parseInt(e[1]),c=parseInt(e[2]);return"rgb("+(Math.round((t-o)*n)+o)+","+(Math.round((t-s)*n)+s)+","+(Math.round((t-c)*n)+c)+")"}function p(a,r,e){var t=a.split(","),n=r.split(","),o=parseInt(t[0].slice(4)),s=parseInt(t[1]),c=parseInt(t[2]);return"rgb("+(Math.round((parseInt(n[0].slice(4))-o)*e)+o)+","+(Math.round((parseInt(n[1])-s)*e)+s)+","+(Math.round((parseInt(n[2])-c)*e)+c)+")"}!function(a,r){"use strict";var e=function(a,o){var s=new Image,r=a.src||a;"data:"!==r.substring(0,5)&&(s.crossOrigin="Anonymous"),s.onload=function(){var a,r,e,t=(a=s.width,r=s.height,(e=document.createElement("canvas")).setAttribute("width",a),e.setAttribute("height",r),e.getContext("2d"));t.drawImage(s,0,0);var n=t.getImageData(0,0,s.width,s.height);o&&o(n.data)},s.src=r},u=function(a){return["rgb(",a,")"].join("")},l=function(a,r){return{name:u(a),count:r}},t={};t.colors=function(a,s){var c=(s=s||{}).exclude||[],i=s.paletteSize||10;e(a,function(a){for(var r={},e="",t=[],n=0;n<a.length;n+=4)t[0]=a[n],t[1]=a[n+1],t[2]=a[n+2],e=t.join(","),-1===t.indexOf(void 0)&&0!==a[n+3]&&-1===c.indexOf(u(e))&&(r[e]=e in r?r[e]+1:1);if(s.success){var o=function(a,r){if(a.length>r)return a.slice(0,r);for(var e=a.length-1;e<r-1;e++)a.push(l("0,0,0",0));return a}(function(a){var r=[];for(var e in a)r.push(l(e,a[e]));return r.sort(function(a,r){return r.count-a.count}),r}(r),i+1);s.success({dominant:o[0].name,secondary:o[1].name,palette:o.map(function(a){return a.name}).slice(1)})}})},a.RGBaster=a.RGBaster||t}(window),d.adaptiveBackground={run:function(a){var l=d.extend({},r,a);d(l.selector).each(function(a,r){var c=d(this),i=function(a){var r=a.match(/\d+/g);return(299*r[0]+587*r[1]+114*r[2])/1e3},u=function(){var a=c.attr("data-ab-css-background");return void 0!==a&&!1!==a},t=function(){var a=c.css("background-image");return/\(([^)]+)\)/.exec(a)[1].replace(/"/g,"")};c.on(n,function(a,r){var e,t;if(e=l.parent&&c.parents(l.parent).length?c.parents(l.parent):c.attr(g)&&c.parents(c.attr(g)).length?c.parents(c.attr(g)):u()?c:l.parent?c.parents(l.parent):c.parent(),l.shadeVariation&&(r.color=(t=r.color,1==l.shadeVariation?i(t)<=128?h(t,l.shadePercentage):h(t,-l.shadePercentage,l.shadePercentage):"blend"==l.shadeVariation?128<=i(t)?p(t,l.shadeColors.dark,l.shadePercentage):p(t,l.shadeColors.light,l.shadePercentage):void 0)),d.isNumeric(l.transparent)&&null!=l.transparent&&.01<=l.transparent&&l.transparent<=.99){var n=r.color.replace("rgb","rgba").replace(")",", "+l.transparent+")");e.css({backgroundColor:n})}else e.css({backgroundColor:r.color});var o,s;l.normalizeTextColor&&e.css({color:(o=r.color,128<=i(o)?l.normalizedTextColors.dark:l.normalizedTextColors.light)}),e.addClass((s=r.color,i(s)<=128?l.lumaClasses.dark:l.lumaClasses.light)).attr("data-ab-yaq",i(r.color)),l.success&&l.success(c,r)}),function(){if("PICTURE"==c[0].tagName){var a=c[0].children;for(var r in a)if("IMG"==a[r].tagName){var e=a[r];break}e.currentSrc&&(e=e.currentSrc)}else e=u()?t():c[0];RGBaster.colors(e,{paletteSize:20,exclude:l.exclude,success:function(a){c.attr("data-ab-color",a.dominant),c.trigger(n,{color:a.dominant,palette:a.palette})}})}()})}}}(jQuery),$(document).ready(function(){$.adaptiveBackground.run({shadeVariation:!0,shadePercentage:.2})});